apply plugin: 'java'

repositories {
    mavenLocal()
}

dependencies {
    compile "io.netty:netty-all:4.1.8.Final"
}

task run(type: JavaExec) {
    args = ["8167"]
    classpath = sourceSets.main.runtimeClasspath
    main = "local.chat.Main"
    ignoreExitValue = true
}

task dist(type: Jar) {
    from files(sourceSets.main.output.classesDirs)
    from files(sourceSets.main.output.resourcesDir)
    from {configurations.compile.collect {zipTree(it)}}

    manifest {
        attributes 'Main-Class': 'local.chat.Main'
    }
}

dist.dependsOn classes